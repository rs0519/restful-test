<!DOCTYPE html>
<html>
  <head>
    <title><%=title%></title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
  </head>
<body>
<form method="post" action="" id="the-form">
  <table cellpadding="11">
  <tr>
    <td class="label">Name</td><td>: <input type="text" name="name" class="name" value="<%=data[0].name%>"></td>
  </tr>
  <tr>
    <td class="label">Email</td><td>: <input type="text" name="email" class="email" value="<%=data[0].email%>"></td>
  </tr>
  <tr>
    <td class="label">Password</td><td>: <input type="password" name="password" class="password" value="<%=data[0].password%>"></td>
  </tr>
  <tr>
    <td class="label"></td>
    <td>
      &nbsp; <input type="button" value="Save" onClick="saveUser()">
    </td>
  </tr>
  </table>
</form>
<script>
  function saveUser(){
    const name = document.querySelector('.name').value;
    const email = document.querySelector('.email').value;
    const password = document.querySelector('.password').value;
    const user_id = "<%= data[0].user_id %>";
    const params = {
      name,
      email,
      password,
      user_id
    }
    const uri = "/api/user/update";
    axios.post(uri, params).then(res => {
      if (res) {
        window.location.href = '/user';
        return false;
      }
    });
  }
</script>
</body>
</html>
